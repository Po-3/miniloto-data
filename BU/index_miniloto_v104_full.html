<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒŸãƒ‹ãƒ­ãƒˆçµæœæ¤œç´¢ãƒ„ãƒ¼ãƒ« v1.04</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #fff6f0;
      color: #222;
    }
    h1 { color: #d94f4f; }
    button {
      padding: 8px 16px;
      margin: 5px;
      border: none;
      border-radius: 6px;
      background-color: #ff9999;
      color: white;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 1px 1px 4px rgba(0,0,0,0.2);
    }
    .scroll-button {
      position: fixed;
      right: 12px;
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 50%;
      background: #ffaaaa;
      color: #fff;
      font-size: 20px;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    #toTop { bottom: 72px; }
    #toBottom { bottom: 20px; }
  </style>
</head>
<body>
  <h1>ãƒŸãƒ‹ãƒ­ãƒˆçµæœæ¤œç´¢ãƒ„ãƒ¼ãƒ« v1.04</h1>
  <p id="lastUpdated">ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ—¥ï¼šèª­ã¿è¾¼ã¿ä¸­...</p>

  <div class="filters">
    <label>é–‹å‚¬å› From: <input id="fromRound" type="number"></label>
    <label>To: <input id="toRound" type="number"></label>
    <label>å«ã‚€æ•°å­—: <input id="includeNumbers" placeholder="ä¾‹: 3,17,28" type="text"></label>
    <label>é™¤ãæ•°å­—: <input id="excludeNumbers" placeholder="ä¾‹: 1,12" type="text"></label>
    <button onclick="filterResults()">ğŸ” æ¤œç´¢</button>
    <button onclick="resetFilters()">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
  </div>

  <table id="lottoTable" border="1" style="width:100%; margin-top:20px;">
    <thead>
      <tr>
        <th>é–‹å‚¬å›</th><th>æ—¥ä»˜</th><th>æœ¬æ•°å­—</th><th>ãƒœãƒ¼ãƒŠã‚¹</th><th>ç‰¹å¾´</th>
        <th>1ç­‰è³é‡‘</th><th>1ç­‰å£æ•°</th><th>2ç­‰è³é‡‘</th><th>2ç­‰å£æ•°</th>
        <th>3ç­‰è³é‡‘</th><th>3ç­‰å£æ•°</th><th>4ç­‰è³é‡‘</th><th>4ç­‰å£æ•°</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <button id="toTop" class="scroll-button" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">â¬†</button>
  <button id="toBottom" class="scroll-button" onclick="window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'})">â¬‡</button>

  <script>
    let data = [];

    async function loadData() {
      const res = await fetch("miniloto_data_for_web_with_features.json");
      data = await res.json();
      renderTable(data);
      const dates = data.map(d => d["æ—¥ä»˜"]).filter(Boolean).sort();
      const latest = dates[dates.length - 1];
      document.getElementById("lastUpdated").textContent = `ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ—¥ï¼š${latest} ï½œãƒ„ãƒ¼ãƒ«Verï¼š1.04`;
    }

    function renderTable(filteredData) {
      const tbody = document.querySelector("#lottoTable tbody");
      tbody.innerHTML = "";
      filteredData.forEach(item => {
        const nums = [item["ç¬¬1æ•°å­—"], item["ç¬¬2æ•°å­—"], item["ç¬¬3æ•°å­—"], item["ç¬¬4æ•°å­—"], item["ç¬¬5æ•°å­—"]].join("ãƒ»");
        const row = `
          <tr>
            <td>${item["é–‹å‚¬å›"]}</td><td>${item["æ—¥ä»˜"]}</td><td>${nums}</td><td>${item["BONUSæ•°å­—"]}</td><td>${item["ç‰¹å¾´"]}</td>
            <td>${item["1ç­‰è³é‡‘"]}</td><td>${item["1ç­‰å£æ•°"]}</td><td>${item["2ç­‰è³é‡‘"]}</td><td>${item["2ç­‰å£æ•°"]}</td>
            <td>${item["3ç­‰è³é‡‘"]}</td><td>${item["3ç­‰å£æ•°"]}</td><td>${item["4ç­‰è³é‡‘"]}</td><td>${item["4ç­‰å£æ•°"]}</td>
          </tr>`;
        tbody.insertAdjacentHTML("beforeend", row);
      });
    }

    function filterResults() {
      const fromRound = parseInt(document.getElementById("fromRound").value) || 0;
      const toRound = parseInt(document.getElementById("toRound").value) || Infinity;
      const includeNumbers = document.getElementById("includeNumbers").value.split(",").map(x => parseInt(x.trim()));
      const excludeNumbers = document.getElementById("excludeNumbers").value.split(",").map(x => parseInt(x.trim()));

      const filtered = data.filter(item => {
        const round = parseInt(item["é–‹å‚¬å›"]);
        const nums = [item["ç¬¬1æ•°å­—"], item["ç¬¬2æ•°å­—"], item["ç¬¬3æ•°å­—"], item["ç¬¬4æ•°å­—"], item["ç¬¬5æ•°å­—"]].map(Number);
        return (
          round >= fromRound &&
          round <= toRound &&
          includeNumbers.every(n => isNaN(n) || nums.includes(n)) &&
          excludeNumbers.every(n => isNaN(n) || !nums.includes(n))
        );
      });

      renderTable(filtered);
    }

    function resetFilters() {
      document.getElementById("fromRound").value = "";
      document.getElementById("toRound").value = "";
      document.getElementById("includeNumbers").value = "";
      document.getElementById("excludeNumbers").value = "";
      renderTable(data);
    }

    document.addEventListener("DOMContentLoaded", loadData);
  </script>
</body>
</html>
